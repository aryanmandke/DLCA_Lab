<!DOCTYPE html>
<html>
<head>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f0f0;
        }

        #container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #ffffff;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
            border-radius: 5px;
        }

        h1 {
            color: #333;
        }

        /* Styling for the input fields and calculate button */
        label {
            font-size: 16px;
            color: #333;
            margin-right: 10px;
        }

        input[type="number"] {
            width: 40px;
            padding: 6px;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        #calculate, #reset {
            font-size: 16px;
            padding: 8px 16px;
            background-color: #0074d9;
            color: #fff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        /* Styling for the truth table */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th, td {
            border: 1px solid #ccc;
            padding: 8px;
            text-align: center;
        }

        th {
            background-color: #333;
            color: #fff;
        }

        tr:nth-child(even) {
            background-color: #f2f2f2;
        }

    </style>
</head>
<body>
    <div id="container">
        <h1>Booth's Algorithm Calculator</h1>
        <h2>Enter the numbers to be multiplied in decimal format.</h2>

        <label for="first">First Number: </label>
        <input type="number" id="first">
        <label for="second">Second Number: </label>
        <input type="number" id="second">
        <button id="calculate">Calculate</button>

        <table id="algoTable">
            <thead>
                <tr>
                    <th>Count</th>
                    <th>M</th>
                    <th>AC</th>
                    <th>Q</th>
                    <th>Q<sub>-1</sub></th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id="algoBody"></tbody>
        </table>
        <div id = "result"></div>
    </div>
    
    <div><script>
        function po(n) {
    let i = 1;
    for (let k = 0; k < n; k++) {
        i = i * 2;
    }
    return i;
}

function ab(c) {
    if (c >= 0) {
        return c;
    } else {
        return -c;
    }
}

function less(c) {
    if (c < 0) {
        return 1;
    } else {
        return 0;
    }
}

function odd(a) {
    if (a % 2 === 0) {
        return 0;
    } else {
        return 1;
    }
}

function binary(N, Cnt) {
    let i, j = 1;
    let ans="";
    while(N!=0){
        i=N%2;
        N=Math.floor(N/2);
        ans=String(i)+ans;
        j+=1;
    }
    while(j<=Cnt){
    ans="0"+ans;
    j+=1;
    }
    return ans;
}
document.getElementById('calculate').addEventListener('click', () =>{
    

    let M = parseInt(document.getElementById('first').value);
    let Q = parseInt(document.getElementById('second').value);
    const algoBody = document.getElementById('algoBody');
    const result = document.getElementById('result');
    algoBody.innerHTML = '';
    result.innerHTML = '';

        let A = 0;
        let Q1 = 0;
        let flag = 0;
        let n = 0;
        let b, c, d, e;
        let Q0 = 0;
        let abM, abQ;
        let negQ, negM;
        let nQ, nM;
        let loop, count = 1, Cnt;
        let ac,q,r,m; 
    
        abM = ab(M);
        abQ = ab(Q);
        negM = less(M);
        negQ = less(Q);
    
        while (true) {
            b = po(n);
            if (abM >= b) {
                n += 1;
                count += 1;
            } else {
                break;
            }
        }
    
        b = po(count - 1);
        c = po(count);
        d = c - 1;
        e = b / 2;
        Cnt = count;
    
        nM = (d - abM) + 1;
        nQ = (d - abQ) + 1;
        let Morg = M, Qorg = Q;
        if (negM === 1 || negQ === 1) {
            if (negM === 1) {
                M = nM;
            }
            if (negQ === 1) {
                Q = nQ;
            }
        }
        let Morg1 = M, Qorg1 = Q;
        while (count !== 0) {
            loop = 0;
            flag = odd(Q);
            if (flag === 1) {
                Q0 = 1;
            } else {
                Q0 = 0;
            }
            if(count==Cnt){

                ac = binary(A, Cnt);
                q = binary(Q, Cnt);
                m = binary(M , Cnt);
                act="Initialization"

                const newRow = document.createElement('tr');
                newRow.innerHTML = `<td>${count}</td><td>${m}</td><td>${ac}</td><td>${q}</td><td>${Q1}</td><td>${act}</td>`;
                algoBody.appendChild(newRow);
            }
    
            if (Q1 !== Q0) {
                if (Q0 === 1 && Q1 === 0) {
                    while (loop !== 2) {
                        if (loop === 0) {
                            Q1 = Q0;
                            if (negM === 1) {
                                A = A + abM;
                            } else {
                                A = A + (d - M) + 1;
                            }
    
                            if (A > d) {
                                A = A % c;
                            }
    
                            act="A=A-M";
                        }
    
                        if (loop === 1) {
                            flag = odd(A);
                            Q = Math.floor(Q / 2);
                            A = Math.floor(A / 2);
                            if (flag === 1) {
                                Q += b;
                            }
    
                            if (A >= e) {
                                A += b;
                            }
    
                            act="Right Arithmetic Shift";
    
                        }
                        loop += 1;
    
                        ac = binary(A, Cnt);
                        q = binary(Q, Cnt);
                        m = binary(M , Cnt);

                        const newRow = document.createElement('tr');
                        newRow.innerHTML = `<td>${count}</td><td>${m}</td><td>${ac}</td><td>${q}</td><td>${Q1}</td><td>${act}</td>`;
                        algoBody.appendChild(newRow);
                        
             }
            }
             else {
                    while (loop !== 2) {
                        if (loop === 0) {
                            Q1 = Q0;
                            if (negM === 1) {
                                A = A + nM;
                            } else {
                                A = A + M;
                            }
                            if (A > d) {
                                A = A % c;
                            }
    
                            act="A=A+M";
                        }
    
                        if (loop === 1) {
                            flag = odd(A);
                            Q = Math.floor(Q / 2);
                            A = Math.floor(A / 2);
                            if (flag === 1) {
                                Q += b;
                            }
    
                            if (A >= e) {
                                A += b;
                            }
    
                            act="Right Arithmetic Shift";
    
                        }
                        loop += 1;
    
                        ac = binary(A, Cnt);
                        q = binary(Q, Cnt);
                        m = binary(M , Cnt);
    
                        const newRow = document.createElement('tr');
                        newRow.innerHTML = `<td>${count}</td><td>${m}</td><td>${ac}</td><td>${q}</td><td>${Q1}</td><td>${act}</td>`;
                        algoBody.appendChild(newRow);
                        
             }
                }
         } else {
                Q1 = Q0;
                flag = odd(A);
                Q = Math.floor(Q / 2);
                A = Math.floor(A / 2);
                if (flag === 1) {
                    Q += b;
                }
    
                if (A >= e) {
                    A += b;
                }
    
                act="Right Arithmetic Shift";
    
                         ac = binary(A, Cnt);
                         q = binary(Q, Cnt);
                         m = binary(M , Cnt);
     
                        const newRow = document.createElement('tr');
                        newRow.innerHTML = `<td>${count}</td><td>${m}</td><td>${ac}</td><td>${q}</td><td>${Q1}</td><td>${act}</td>`;
                        algoBody.appendChild(newRow);
                        
             }
            count -= 1;
        }
    
        Q = (A * c) + Q;
        if (negM === 1 || negQ === 1) {
            if (!(negM === 1 && negQ === 1)) {
                Q = -(c * c) + Q;
            }
        }
        r=ac+" "+q;

        result.innerHTML = `<p> M = (${Morg})<sub>10</sub> = (${binary(Morg1,Cnt)})<sub>2</sub><br>
        Q = (${Qorg})<sub>10</sub> = (${binary(Qorg1,Cnt)})<sub>2</sub><br>
        Result = (${Q})<sub>10</sub> = (${r})<sub>2</sub>`;


    });

    </script>
    </div>
</body>

</html>
